var steps=Array.from(document.querySelectorAll(".scr_quiz__step")),len=steps.length,progress=document.querySelector(".progress-line"),moveProgressLine=()=>{var e=steps.filter(e=>e.classList.contains("active"))[0];progress.style.width=e.dataset.step/len*100+"%"},initGetBtns=(t,e)=>{var r=document.querySelector(".scr_quiz__get_btn"),s=document.querySelector(".scr_header");!r||!t||e.length<1||[r].forEach(e=>e.addEventListener("click",()=>{t.classList.add("active"),s.classList.add("fixed"),document.body.classList.add("lock"),moveProgressLine()}))},initCloseBtns=(t,r)=>{var e=Array.from(document.querySelectorAll(".quiz-close")),s=document.querySelector(".scr_quiz__confirm"),o=document.querySelector(".scr_header"),i=document.querySelector(".scr_quiz__get_btn");e.length<1||e.forEach(e=>{e.addEventListener("click",()=>{t.style.display="none",setTimeout(()=>t.style.display="block",500),i.setAttribute("disabled","disabled"),t.classList.remove("active"),r.forEach(e=>"1"===e.dataset.step?e.classList.add("active"):e.classList.remove("active")),s.classList.remove("active"),o.classList.remove("fixed"),document.body.classList.remove("lock"),progress.style.display="none",progress.style.width="0%",setTimeout(()=>{progress.style.display="block",i.removeAttribute("disabled")},500)})})},moveStep=(e,t)=>{e=e.closest(".scr_quiz__step"),t=e["next"===t?"nextElementSibling":"previousElementSibling"];e.classList.remove("active"),t.classList.add("active"),moveProgressLine()},initRadioBtns=(e,t)=>{var r=Array.from(document.querySelectorAll(".scr_quiz__label_radio input"));if(!(r.length<1))r.forEach(e=>{e.addEventListener("click",()=>setTimeout(()=>moveStep(e,"next"),500))})},initBackwardBtns=()=>{var e=Array.from(document.querySelectorAll(".quiz-backward"));if(!(e.length<1))e.forEach(e=>{e.addEventListener("click",()=>moveStep(e,"prev"))})},initForwardBtns=()=>{var e=Array.from(document.querySelectorAll(".quiz-forward"));if(!(e.length<1))e.forEach(e=>{e.addEventListener("click",()=>setTimeout(()=>moveStep(e,"next"),500))})},formSubmit=t=>{var r,s=document.querySelector(".scr_quiz__interview");s&&(r=Array.from(s.elements).filter(e=>e.classList.contains("required")),s.addEventListener("submit",e=>{e.preventDefault(),r.forEach(e=>{e.value?e.classList.remove("error"):e.classList.add("error")}),r.some(e=>e.classList.contains("error"))||(s.reset(),t.forEach(e=>e.classList.remove("active")),document.querySelector(".scr_quiz__confirm").classList.add("active"))}))},initContacts=()=>{var e=document.querySelectorAll(".contacts__copy");e.length<1||e.forEach(t=>{t.addEventListener("click",()=>{var e=t.previousElementSibling;e&&(e=e.textContent,navigator.clipboard.writeText(e))})})},doCreateMapScript=t=>{setTimeout(function(){var e=document.createElement("script");e.async=!1,e.src="https://api-maps.yandex.ru/2.1/?apikey=key&lang=ru_RU",document.body.appendChild(e),e.onload=()=>t()},2e3)},initMap=()=>{ymaps.ready(()=>{var e,t=[45.054809,38.970974];ymaps&&(e=new ymaps.Map("map",{center:t,zoom:17}),t=new ymaps.Placemark(t,{},{iconLayout:"default#image",iconImageHref:"images/mark.svg",iconImageSize:[100,100],iconImageOffset:[-60,-80]}),e.controls.remove("geolocationControl"),e.controls.remove("searchControl"),e.controls.remove("trafficControl"),e.controls.remove("typeSelector"),e.controls.remove("fullscreenControl"),e.controls.remove("rulerControl"),e.geoObjects.add(t))})};document.addEventListener("DOMContentLoaded",()=>{var e=document.querySelector(".scr_quiz__interview"),t=Array.from(document.querySelectorAll(".scr_quiz__step"));initGetBtns(e,t),initCloseBtns(e,t),initRadioBtns(e,t),initBackwardBtns(e,t),initForwardBtns(e,t),formSubmit(t),initContacts(),document.getElementById("map")&&doCreateMapScript(initMap)});